<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">

<div class="container">
    <div class="card">
        <div class="card-body">
            <center>
                <form class="row g-3" id="welcome-form" action="/setup" method="POST">
                    <div class="mb-3">
                        <select name="deviceId" id="select-device" name="plantId" class="form-control">
                            <option value="device1">Device</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <select id="select-plant" name="plantId" class="form-control">
                        </select>
                    </div>
                    <div class="mb-3">
                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Submit</button>
                    </div>
                </form>
            </center>
        </div>
    </div>
</div>
<script>
    const plantSelect = document.getElementById("select-plant")
    const deviceInput = document.getElementById("select-device")

    fetch("/api/houseplant/").then(r => r.json()).then(res => {
        for (plant of res) {
            let option = document.createElement("option")
            option.value = plant.id
            option.innerText = plant["Common name"]

            plantSelect.appendChild(option)
        }
    })


    document.getElementById("welcome-form").addEventListener("submit", (e) => {
        if (!deviceInput.value || !plantSelect.value)
            e.preventDefault();
    })
</script>